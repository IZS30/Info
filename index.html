<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Hilfe-Portal — DE / AR (ohne Rotation)</title>

<style>
:root{
  --bg-black:#000;
  --accent-green:#0f3d2e;
  --white: #fff;
  --border-black:#000;
}
html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;}
body{
  min-height:100%;
  background-color:var(--bg-black);
  background-image:
    radial-gradient(rgba(255,255,255,0.95) 1px, transparent 1px),
    radial-gradient(rgba(255,255,255,0.6) 0.6px, transparent 0.6px);
  background-size:20px 20px, 40px 40px;
  background-position: 0 0, 10px 20px;
  color:var(--white);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  overflow:auto;
}

/* Layout */
#app { display:flex; align-items:center; justify-content:center; min-height:100vh; padding:24px; box-sizing:border-box; }
.center { text-align:center; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:18px; max-width:980px; width:100%; }

/* Typography / Controls */
h1.title{ font-size:clamp(28px,6vw,56px); margin:0 0 6px 0; letter-spacing:0.5px; font-weight:700; text-shadow: 0 6px 18px rgba(0,0,0,0.6); }
.cta-block{max-width:760px;width:100%;}
.cta { display:flex; gap:18px; align-items:center; justify-content:center; flex-direction:column; }
.cta p{ margin:0; font-size:23px; }

.btn-circle{
  width:150px; height:150px; border-radius:999px;
  display:inline-flex; align-items:center; justify-content:center;
  font-weight:600; cursor:pointer; user-select:none;
  box-shadow: 0 8px 30px rgba(0,0,0,0.6);
  border:3px solid var(--border-black);
  background:var(--accent-green); color:var(--white);
  transition: transform .15s ease, box-shadow .15s; font-size:20px;
}
.btn-circle:active{ transform: scale(.98); }
.btn-circle:hover{ transform: scale(1.04); }

/* Topics */
.topics-wrap{
  width:100%; max-width:880px;
  height: calc(70vh);
  position:relative; margin:12px auto;
  display:flex; align-items:center; justify-content:center;
  overflow:visible;
}
.topic-circle{
  position:absolute; border-radius:999px;
  display:flex; align-items:center; justify-content:center;
  text-align:center; box-sizing:border-box;
  font-weight:600; cursor:pointer;
  border:3px solid var(--border-black);
  background:var(--accent-green); color:var(--white);
  box-shadow: 0 10px 30px rgba(0,0,0,0.6);
  transition: transform .18s cubic-bezier(.2,.9,.3,1), opacity .2s;
  padding:8px;
}
.topic-circle:hover{ transform: scale(1.06); z-index:30; }

/* Topbar + Modal */
.topbar{ width:100%; max-width:760px; display:flex; justify-content:space-between; align-items:center; margin-bottom:14px; padding:0 6px; box-sizing:border-box; }
.link-back{ color:var(--white); text-decoration:underline; cursor:pointer; font-size:20px; background:transparent; border:none; padding:6px; }

.modal-overlay{
  position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:1000; background:rgba(0,0,0,0.6);
}
.modal{
  width:100%; max-width:720px; border-radius:16px; padding:20px; box-sizing:border-box;
  background:var(--accent-green); border:3px solid var(--border-black); color:var(--white);
  box-shadow: 0 20px 60px rgba(0,0,0,0.6); transform: translateY(8px) scale(.98); opacity:0; transition: all 200ms ease;
}
.modal.open{ transform:translateY(0) scale(1); opacity:1; }
.modal h3{ margin:0 0 10px 0; font-size:24px; }
#modalContent { font-size: 20px; line-height: 1.55; opacity: 0.98; }

.modal-close{
  position:absolute; right:12px; top:12px; width:36px;height:36px;
  border-radius:999px; background:var(--white); color:var(--border-black);
  display:inline-flex;align-items:center;justify-content:center;
  border:none;cursor:pointer;font-weight:700;
  box-shadow:0 6px 14px rgba(0,0,0,0.5);
}

/* Form fields basic style */
input[type="text"], input[type="email"], select, textarea {
  width:100%; padding:8px; border-radius:6px; border:none; box-sizing:border-box;
}
label { display:block; font-size:16px; text-align:left; color:var(--white); }

/* Footer */
footer { margin-top:18px; color: rgba(255,255,255,0.6); font-size:14px; }

/* Responsive tweaks */
@media (max-width:700px){
  .topics-wrap{ height:420px; }
  .btn-circle{ width:180px;height:180px;font-size:18px; }
}
</style>
</head>

<body>
  <div id="app">
    <main class="center" aria-live="polite">

      <!-- HOME -->
      <section id="homeView" style="display:flex;flex-direction:column;align-items:center;">
        <div class="cta-block">
          <h1 class="title">Auskunft über IZS?</h1>

          <div class="cta">
            <p>Auskunft über IZS auf <strong>Deutsch</strong>? – hier klicken</p>
            <button id="btn-de" class="btn-circle">hier klicken</button>
          </div>

          <div class="cta" style="margin-top:14px;" dir="rtl">
            <p style="direction:rtl;margin-bottom:8px;font-size:24px;">معلومات حول المركز باللغة <strong>العربية</strong؟ — اضغط هنا</p>
            <button id="btn-ar" class="btn-circle">اضغط هنا</button>
          </div>
        </div>

        <footer>© <span id="year"></span> – Hilfe-Portal</footer>
      </section>

      <!-- THEMEN -->
      <section id="topicsView" style="display:none;width:100%;max-width:980px;">
        <div class="topbar">
          <button id="backBtn" class="link-back">← Zurück</button>
          <h2 id="topicsTitle" style="margin:0;font-size:20px;font-weight:600;"></h2>
          <div style="width:48px;"></div>
        </div>

        <div class="topics-wrap" id="topicsWrap"></div>

        <footer style="text-align:center;margin-top:12px;color:rgba(255,255,255,0.6);font-size:13px;">
          Wähle ein Thema, um mehr zu erfahren
        </footer>
      </section>

    </main>
  </div>

  <!-- MODAL -->
  <div id="modalOverlay" class="modal-overlay">
    <div id="modalBox" class="modal">
      <button id="closeModal" class="modal-close">✕</button>
      <h3 id="modalTitle"></h3>
      <div id="modalContent" style="margin-top:8px;"></div>
    </div>
  </div>

<script>
/* --- Daten --- */
const topics = [
  {
    id:1,
    deTitle:"Islamische Eheschließung (Nikah)",
    arTitle:"الزواج الإسلامي (النكاح)",
    deInfo:
      "Sie brauchen folgende Unterlagen:<br>1- Erweiterte Meldebescheinigung (vom Rathaus),<br>2- Kopie der Ausweise beider Partner.<br><br>Dann können Sie einen Termin per Email vereinbaren: info@iz-stuttgart.de",
    arInfo:
      "لإجراء عقد الزواج الإسلامي يجب إحضار:<br> شهادة السكن الموسعة (Erweiterte Meldebescheinigung vom Rathaus) <br>ونسخ من بطاقات الهوية لكلا الزوجين.<br><br> بعد ذلك يمكن ترتيب موعد عن طريق الإيميل: info@iz-stuttgart.de "
  },
  { id:2, deTitle:"Arabisch lernen für Kinder", arTitle:"تعليم اللغة العربية للأطفال",
    deInfo:"Anmeldung erforderlich. Sie erreichen uns unter: (WhatsApp) ",
    arInfo:"التسجيل مطلوب, للتواصل: (WhatsApp) " },
  { id:3, deTitle:"Quran lernen für Kinder", arTitle:"تعليم القرآن الكريم للأطفال",
    deInfo:"Anmeldung erforderlich. Sie erreichen uns unter: (WhatsApp)",
    arInfo:"التسجيل مطلوب, للتواصل: (WhatsApp) " },
  { id:4, deTitle:"Vorträge des Imams", arTitle:"محاضرات الإمام",
    deInfo:"Die Vorträge finden sonntags nach Salat Al-‘Asr statt (nur auf Arabisch).",
    arInfo:"تقام المحاضرات كل يوم أحد بعد صلاة العصر مباشرة (باللغة العربية فقط)." },
  { id:5, deTitle:"Fragen / Kontakt zum Imam", arTitle:"أسئلة / تواصل مع الإمام",
    deInfo:"Email: info@iz-stuttgart.de",
    arInfo:"البريد الإلكتروني: info@iz-stuttgart.de" }
];

const homeView = document.getElementById('homeView');
const topicsView = document.getElementById('topicsView');
const topicsWrap = document.getElementById('topicsWrap');
const topicsTitle = document.getElementById('topicsTitle');
const backBtn = document.getElementById('backBtn');
const yearSpan = document.getElementById('year');
const btnDe = document.getElementById('btn-de');
const btnAr = document.getElementById('btn-ar');
const modalOverlay = document.getElementById('modalOverlay');
const modalBox = document.getElementById('modalBox');
const modalTitle = document.getElementById('modalTitle');
const modalContent = document.getElementById('modalContent');
const closeModal = document.getElementById('closeModal');

let currentLang = null;
yearSpan.textContent = new Date().getFullYear();

/* --- Buttons --- */
btnDe.addEventListener('click', () => openTopics('de'));
btnAr.addEventListener('click', () => openTopics('ar'));

backBtn.addEventListener('click', () => {
  closeModalIfOpen();
  topicsView.style.display = 'none';
  homeView.style.display = 'flex';
  document.documentElement.lang = 'de';
  currentLang = null;
  topicsWrap.innerHTML = '';
});

/* --- Modal handling --- */
function openModal(topic) {
  const isAR = currentLang === 'ar';
  modalTitle.textContent = isAR ? topic.arTitle : topic.deTitle;

  let html = isAR
    ? `<div dir="rtl">${topic.arInfo}</div>`
    : `<div>${topic.deInfo}<br><br><strong>Haben Sie diese Unterlagen schon?</strong></div>`;

  if (!isAR && topic.id === 1) {
    // Formular (Nikah)
    html += `
      <form id="nikahForm" action="https://formsubmit.co/el/cijefo" method="POST" style="margin-top:18px; display:flex; flex-direction:column; gap:12px;">

        <input type="hidden" name="_subject" value="Termin - Islamische Eheschließung">
        <input type="hidden" name="_captcha" value="false">

        <label>
          Name*:
          <input type="text" name="Name" id="f_name" required >
        </label>

        <label>
          Email:
          <input type="email" name="Email" id="f_email" >
        </label>

        <label>
          Telefonnummer:
          <input type="text" name="Telefon" id="f_tel" >
        </label>

        <label>
          Zeit bevorzugt*:
          <select name="Zeit" id="f_time" required>
            <option value="">Bitte wählen</option>
            <option value="Vormittag">Vormittag</option>
            <option value="Nachmittag">Nachmittag</option>
            <option value="Immer">Immer</option>
          </select>
        </label>

        <label>
          Tag bevorzugt*:
          <select name="Tag" id="f_day" required>
            <option value="">Bitte wählen</option>
            <option value="Montag">Montag</option>
            <option value="Dienstag">Dienstag</option>
            <option value="Mittwoch">Mittwoch</option>
            <option value="Donnerstag">Donnerstag</option>
            <option value="Freitag">Freitag</option>
            <option value="Samstag">Samstag</option>
            <option value="Sonntag">Sonntag</option>
            <option value="Immer">Immer</option>
          </select>
        </label>

        <label>
          Nachricht (optional):
          <textarea name="Nachricht" style="min-height:90px;"></textarea>
        </label>

        <button type="submit" style="padding:12px;border-radius:8px;border:none;background:#fff;color:#000;font-weight:700;cursor:pointer;">
          Termin anfragen
        </button>

      </form>
    `;
  }

  modalContent.innerHTML = html;
  modalOverlay.style.display = 'flex';
  requestAnimationFrame(() => modalBox.classList.add('open'));

  // Falls Nikah-Form vorhanden → attach validation
  const nikahForm = document.getElementById('nikahForm');
  if (nikahForm) {
    nikahForm.addEventListener('submit', function(e){
      const name = document.getElementById('f_name').value.trim();
      const email = document.getElementById('f_email').value.trim();
      const tel = document.getElementById('f_tel').value.trim();
      const time = document.getElementById('f_time').value;
      const day = document.getElementById('f_day').value;

      if(!name){
        alert("Bitte Name eingeben.");
        e.preventDefault(); return;
      }
      if(email === "" && tel === ""){
        alert("Bitte Email ODER Telefonnummer eingeben.");
        e.preventDefault(); return;
      }
      if(time === ""){
        alert("Bitte bevorzugte Zeit wählen.");
        e.preventDefault(); return;
      }
      if(day === ""){
        alert("Bitte bevorzugten Tag wählen.");
        e.preventDefault(); return;
      }

      // Formular wird normal abgeschickt → formsubmit.co empfängt es
    }, { once:true });
  }
}

function closeModalIfOpen() {
  if (modalOverlay.style.display === 'flex') {
    modalBox.classList.remove('open');
    setTimeout(() => {
      modalOverlay.style.display = 'none';
      modalTitle.textContent = '';
      modalContent.innerHTML = '';
    }, 180);
  }
}

closeModal.addEventListener('click', closeModalIfOpen);
modalOverlay.addEventListener('click', (e) => {
  if (e.target === modalOverlay) closeModalIfOpen();
});

/* --- Topics page --- */
function openTopics(lang) {
  currentLang = lang;

  homeView.style.display = 'none';
  topicsView.style.display = 'block';

  if (lang === 'ar') {
    topicsTitle.textContent = 'اختر موضوعاً';
    topicsWrap.setAttribute('dir', 'rtl');
    document.documentElement.lang = 'ar';
  } else {
    topicsTitle.textContent = 'Themenübersicht';
    topicsWrap.setAttribute('dir', 'ltr');
    document.documentElement.lang = 'de';
  }

  renderTopicCircles();
}

/* --- Render circles (simple, no rotation) --- */
function renderTopicCircles() {
  topicsWrap.innerHTML = '';

  const cw = topicsWrap.clientWidth || 800;
  const ch = topicsWrap.clientHeight || 480;

  const centerX = cw / 2;
  const centerY = ch / 2;

  const radius = Math.min(cw, ch) * 0.36;
  const circleSize = Math.min(cw, ch) * 0.25;

  topics.forEach((t, i) => {
    const angle = (i / topics.length) * Math.PI * 2 - Math.PI / 2;
    const x = centerX + radius * Math.cos(angle);
    const y = centerY + radius * Math.sin(angle);

    const btn = document.createElement('button');
    btn.className = 'topic-circle';
    btn.style.width = `${circleSize}px`;
    btn.style.height = `${circleSize}px`;

    const fontModifier = currentLang === 'ar' ? 0.16 : 0.12;
    btn.style.fontSize = (circleSize * fontModifier) + "px";

    btn.type = 'button';
    btn.style.left = `${x}px`;
    btn.style.top = `${y}px`;
    btn.style.transform = 'translate(-50%,-50%)';

    btn.innerHTML =
      currentLang === 'ar'
        ? `<div style="direction:rtl">${t.arTitle}</div>`
        : `<div>${t.deTitle}</div>`;

    btn.addEventListener('click', () => openModal(t));

    topicsWrap.appendChild(btn);
  });
}

/* --- Re-render on resize --- */
window.addEventListener('resize', () => {
  clearTimeout(window._renderTopicTimeout);
  window._renderTopicTimeout = setTimeout(() => {
    if (currentLang) renderTopicCircles();
  }, 180);
});
</script>

</body>
</html>
